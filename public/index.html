<!DOCTYPE html>
  <head>
    <meta charset="utf-8">
    <title>AJAX / XMLHttpRequest</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script>
    window.addEventListener('load', function() {
      var xhr,

        makeRequest = function(id) {
          xhr = new XMLHttpRequest();

          if (!xhr) return false;

          // xhr.responseType = "json";

          xhr.onreadystatechange = xhrCallback;
          xhr.open('GET', '/json?id=' + id);
          xhr.send();
        },

        xhrCallback = function() {
          if (xhr.readyState === 4 && xhr.status === 200) {
              // if responseType === 'json'
              // console.log(xhr.response);

              console.log(JSON.parse(xhr.responseText));

              var res = JSON.parse(xhr.responseText);

              if (res.error) {
                outputElem.innerHTML = res.message;
              } else {
                outputElem.innerHTML = res.name + " (geb: " + res.date + ")";
              }
          }
        },

        button = document.getElementById("startRequest"),
        userId = document.getElementById("userId"),
        outputElem = document.getElementById("outputId");

      button.addEventListener("click", function() {
        var id = isNaN(Number(userId.value)) ? "1" : userId.value;

        makeRequest(id);
      });

    })
    </script>
  </head>
  <body>
    <p><label for="userId">UserId</label><input type="text" id="userId" value="1"></p>
    <button id="startRequest">start</button>
    <p id="outputId"></p>
  </body>
</html>